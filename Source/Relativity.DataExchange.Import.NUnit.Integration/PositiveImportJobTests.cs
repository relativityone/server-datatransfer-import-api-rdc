// -----------------------------------------------------------------------------------------------------
// <copyright file="PositiveImportJobTests.cs" company="Relativity ODA LLC">
//   © Relativity All Rights Reserved.
// </copyright>
// <summary>
//   Represents positive import job tests.
// </summary>
// -----------------------------------------------------------------------------------------------------

namespace Relativity.DataExchange.Import.NUnit.Integration
{
	using global::NUnit.Framework;

	using Relativity.DataExchange.TestFramework;
	using Relativity.DataExchange.Transfer;
	using Relativity.Testing.Identification;

	[TestFixture]
	[Feature.DataTransfer.ImportApi.Operations.ImportDocuments]
	public class PositiveImportJobTests : ImportJobTestBase
	{
		[Category(TestCategories.ImportDoc)]
		[Category(TestCategories.Integration)]
		[Category(TestCategories.TransferApi)]
		[IdentifiedTestCase("99aa6c4b-029c-41f2-840b-1ef14a295047", TapiClient.Direct, true, true)]
		[IdentifiedTestCase("77030f47-ff53-4445-a112-0a45fa80fc6e", TapiClient.Web, true, true)]
		[IdentifiedTestCase("2c8adb7d-c787-4364-a930-ae8fff045e52", TapiClient.Aspera, true, true)]
		public void ShouldImportTheFiles(
			TapiClient client,
			bool disableNativeLocationValidation,
			bool disableNativeValidation)
		{
			TapiClientModeAvailabilityChecker.SkipTestIfModeNotAvailable(AssemblySetup.TestParameters, client);

			this.GivenTheAutoGeneratedDatasetToImport(5, true);
			this.GivenTheImportJob();
			GivenTheStandardConfigSettings(client, disableNativeLocationValidation, disableNativeValidation);
			this.WhenExecutingTheJob();
			this.ThenTheImportJobIsSuccessful();
			Assert.That(this.TestJobResult.JobMessages, Has.Count.Positive);
			Assert.That(this.TestJobResult.ProgressCompletedRows, Has.Count.EqualTo(this.SourceData.Rows.Count));
		}
	}
}